library(shiny)

# UI aplikacji
ui <- fluidPage(
  titlePanel("Opcje w zakładkach obok siebie w Sidebar"),
  
  sidebarLayout(
    sidebarPanel(
      h4("Opcje do wyboru:"),
      
      # Układ zakładek w jednym wierszu w Sidebar
      fluidRow(
        column(
          width = 12,
          tabsetPanel(
            id = "sidebar_tabs", # ID zakładek w Sidebar
            tabPanel(
              "Ładowanie danych",
              selectInput("ubezpieczyciel", "Wybierz ubezpieczyciela:", 
                          choices = c("AGRO_TUW", "PZU", "WARTA")),
              numericInput("percentyl", "Podaj percentyl (np. 99.5):", value = 9)
            ),
            tabPanel(
              "Filtr ubezpieczyciele",
              selectInput("kolumna", "Wybierz kolumnę:", 
                          choices = c("Brutto", "Netto", "Suma")),
              actionButton("analyze", "Przeprowadź analizę")
            ),
            tabPanel(
              "Filtr Szkody",
              selectInput("wykres", "Wybierz typ wykresu:", 
                          choices = c("Histogram", "Wykres liniowy", "Wykres punktowy")),
              actionButton("plot", "Pokaż wykres")
            )
          )
        )
      )
    ),
    
    mainPanel(
      textOutput("output_text")
    )
  )
)

# Serwer aplikacji
server <- function(input, output, session) {
  output$output_text <- renderText({
    if (!is.null(input$ubezpieczyciel)) {
      paste("Wybrano ubezpieczyciela:", input$ubezpieczyciel,
            "\nPercentyl:", input$percentyl)
    } else if (!is.null(input$kolumna)) {
      paste("Wybrano kolumnę:", input$kolumna)
    } else if (!is.null(input$wykres)) {
      paste("Wybrano wykres:", input$wykres)
    } else {
      "Wybierz opcję w zakładkach."
    }
  })
}

# Uruchomienie aplikacji
shinyApp(ui = ui, server = server)

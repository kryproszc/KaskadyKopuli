# Przykładowe dane: macierz 12×8 (liczby od 1 do 96)
set.seed(123)
mat <- matrix(sample(1:200, 96, replace = TRUE), nrow = 12, ncol = 8)
mat

# Liczba wierszy/kolumn, które chcemy "pakietować" w kwadraty 4×4
block_size <- 4

# Zakładamy, że 12 i 8 są wielokrotnościami 4
n_blocks_row <- nrow(mat) / block_size
n_blocks_col <- ncol(mat) / block_size

# Przygotowujemy macierz wynikową
result <- matrix(NA, n_blocks_row, n_blocks_col)

# Pętla po blokach 4×4
for (i in seq(1, nrow(mat), by = block_size)) {
  for (j in seq(1, ncol(mat), by = block_size)) {
    # Wycinamy sub-macierz 4×4
    sub_mat <- mat[i:(i+block_size-1), j:(j+block_size-1)]
    
    # Indeksy do zapisu sumy w macierzy wynikowej
    block_i <- (i - 1) / block_size + 1
    block_j <- (j - 1) / block_size + 1
    
    # Zapisujemy sumę elementów w bieżącym bloku
    result[block_i, block_j] <- sum(sub_mat)
  }
}

# Wyświetlamy wynik
result
